<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Search — Simply Science</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <div class="phone page">
      <div class="topbar">
        <div class="dotrow"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
        <div class="battery"></div>
      </div>

      <div class="screen">
        <div class="card">
          <h2 class="title">Search</h2>
          <p class="subtitle">UI now. Backend PubMed search later.</p>

          <div class="field">
            <label for="q">Search papers</label>
            <input class="input" id="q" placeholder="e.g., brain, metformin longevity, CRISPR diabetes" />
          </div>

          <button class="btn btnPrimary" id="searchBtn" type="button">Search</button>

          <div class="divider"></div>

          <div id="searchStatus" class="helper"></div>
          <div id="searchResults" class="feedList"></div>


          <div class="divider"></div>
          <p class="note"> Tip: nnn.</p>
        </div>
        <div class="footerSpace"></div>
      </div>

      <nav class="bottomNav">
        <a class="navItem" href="home.html" data-nav><span class="navIcon">⌂</span><span>Home</span></a>
        <a class="navItem active" href="search.html" data-nav><span class="navIcon">⌕</span><span>Search</span></a>
        <a class="navItem" href="topics.html" data-nav><span class="navIcon">☰</span><span>Topics</span></a>
        <a class="navItem" href="settings.html" data-nav><span class="navIcon">⚙</span><span>Settings</span></a>
      </nav>
    </div>
  </div>

  <script>
    const analyzeBtn = document.getElementById("analyzeBtn");
const resultsDiv = document.getElementById("results");
  analyzeBtn.addEventListener("click", async () => {
    const query = document.getElementById("q").value.trim();
    if (!query) return alert("Please enter a search term!");
  
    resultsDiv.innerHTML = "<p>Loading...</p>";
  
    try {
      const response = await fetch("/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ query })
      });
  
      if (!response.ok) throw new Error("Network response was not ok");
  
      const data = await response.json();
  
      if (data.error) {
        resultsDiv.innerHTML = `<p>Error!!!: ${data.error}</p>`;
        return;
      }
  
      resultsDiv.innerHTML = data.length
        ? data.map(f => `
          <div class="claimCard">
            <strong>${f.category}:</strong> ${f.text}
          </div>
        `).join("")
        : "<p>No claims found.</p>";
  
    } catch (err) {
      console.error(err);
      resultsDiv.innerHTML = `<p>Error catch: ${err.message}</p>`;
    }
  });
    </script>
  </body>
  </html>


